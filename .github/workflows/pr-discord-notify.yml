name: PR ì•Œë¦¼ ë””ìŠ¤ì½”ë“œ ì „ì†¡

on:
  pull_request:
    types: [opened, ready_for_review]

jobs:
  notify-discord:
    runs-on: ubuntu-latest
    steps:
      - name: ë¦¬ë·°ì–´ ë§¤í•‘ ë° ë©”ì‹œì§€ ìƒì„±
        id: set-message
        run: |
          AUTHOR="${{ github.actor }}"
          if [ "$AUTHOR" = "c1vera" ]; then
            MESSAGE="<@287923007425478668> ë‹˜! ì±„ì›ì´ PRì„ ì—´ì—ˆì–´ìš” ğŸ””%0AğŸ‘‰ ${{ github.event.pull_request.html_url }}"
          elif [ "$AUTHOR" = "ckdduf138" ]; then
            MESSAGE="<@287923007425478668> ë‹˜! ì°½ì—´ì´ PRì„ ì—´ì—ˆì–´ìš” ğŸ””%0AğŸ‘‰ ${{ github.event.pull_request.html_url }}"
          else
            MESSAGE="ìƒˆë¡œìš´ PRì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤: ${{ github.event.pull_request.html_url }}"
          fi
          echo "message=$MESSAGE" >> $GITHUB_OUTPUT
        shell: bash

      - name: ë””ìŠ¤ì½”ë“œë¡œ ë©”ì‹œì§€ ì „ì†¡
        uses: tsickert/discord-webhook@v1.0.0
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK }}
          content: ${{ steps.set-message.outputs.message }}
          username: "LPick Bot"
